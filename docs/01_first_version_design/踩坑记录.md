
# queue.put 不能传入  locals 变量，会报错， 只能传入 globals
## https://www.doubao.com/chat/30263446548669698
-----------queue.put--------------- <class 'src.runtime.schemas.ExecutionResult'>
-----------queue.put done---------------
Traceback (most recent call last):
  File "C:\Users\zooos\AppData\Roaming\uv\python\cpython-3.12.11-windows-x86_64-none\Lib\multiprocessing\queues.py", line 264, in _feed
    obj = _ForkingPickler.dumps(obj)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zooos\AppData\Roaming\uv\python\cpython-3.12.11-windows-x86_64-none\Lib\multiprocessing\reduction.py", line 51, in dumps
    cls(buf, protocol).dump(obj)
TypeError: cannot pickle 'module' object
-----------queue.get---------------

## 讲解
在 exec 函数中：如果没有传入 locals，所有的都会写到 globals 里。

如果传入了 locals，那么代码中定义的函数还有变量全部都会写到 locals 里。

这样会造成两个问题。
1. 第一个问题。在这个执行的代码里，没有办法找到定义的函数，没有办法在 globals 里面找到。
2. 第二个问题。locals 里面会记录引入的 import 的模块。也不会，没办法被传回来，会报错无法pickle到queue.put里。


## https://www.doubao.com/chat/30270175627240194